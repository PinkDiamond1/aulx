<!doctype html><meta charset='utf-8'>
<title> Aulx completion testing zone </title>
<link rel='stylesheet' href='demo/codemirror/lib/codemirror.css'>
<link rel='stylesheet' href='demo/codemirror/addon/hint/show-hint.css'>

<style>
body, div.CodeMirror {
  margin: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
</style>
<textarea id='editor'>
// `Stream` is an implementation of lazy/infinite lists.
function Stream(item, next) {
  this.head = item;
  this.shell = null;
  this.computed = false;
  this.generator = next;
}

Stream.prototype = {
  // `tail` is the next stream in the list.
  get tail() {
    if (!this.computed) {
      this.computed = true;
      return this.shell = this.generator();
    } else return this.shell;
  },
  at: function(index) {
    var stream = this;
    for (var i = index; i > 0; i--) {
      stream = stream.tail;
    }
    return stream.head;
  },
  add: function(otherStream) {
    return new Stream(this.head + otherStream.head, function() {
      return this.tail.add(otherStream.tail);
    }.bind(this));
  }
};

var fibonacci = new Stream(0, function() {
         return new Stream(1, function() {
         return fibonacci.add(fibonacci.tail);});});

console.log('fib(10) = ' + fibonacci.at(10));
</textarea>

<script src='demo/codemirror/lib/codemirror.js'></script>
<script src='demo/codemirror/mode/javascript/javascript.js'></script>
<script src='demo/popup-ui.js'></script>
<script src='node_modules/esprima/esprima.js'></script>
<script src='aulx.js'></script>
<script>
var cmeditor = CodeMirror.fromTextArea(editor);
var acUI = new Autocompletion(cmeditor);
</script>
